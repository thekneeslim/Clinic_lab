<p id="notice"><%= notice %></p>

<h1>Appointments</h1>

<div class="">
  <p>
    Our hospital specialises in:
  </p>
  <ul>
    <% Specialty.all.each do |specialty| %>
      <li> <%= specialty.specialty %> </li>
    <% end %>
  </ul>
</div>


<table>
  <thead>
    <tr>
      <th>Patient</th>
      <th>Doctor</th>
      <th>Purpose</th>
      <th>Date</th>
      <th>Time</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% if @current_patient%>
      <% if @current_patient.admin == false%>
        <% @patient_appointments.each do |appointment| %>
          <tr>
            <td><%= appointment.patient.name %></td>
            <td><%= appointment.doctor.name %></td>
            <td><%= appointment.doctor.specialty.specialty %></td>
            <td><%= appointment.appointment_date.date %></td>
            <td><%= appointment.time_table.time_table %></td>
            <td><%= link_to 'Show', appointment %></td>
            <td><%= link_to 'Edit', edit_appointment_path(appointment) %></td>
            <td><%= link_to 'Destroy', appointment, method: :delete, data: { confirm: 'Are you sure?' } %></td>
          </tr>
        <% end %>
      <% else %>
        <% @appointments.each do |appointment| %>
          <tr>
            <td><%= appointment.patient.name %></td>
            <td><%= appointment.doctor.name %></td>
            <td><%= appointment.doctor.specialty.specialty %></td>
            <td><%= appointment.appointment_date.date %></td>
            <td><%= appointment.time_table.time_table %></td>
            <td><%= link_to 'Show', appointment %></td>
            <td><%= link_to 'Edit', edit_appointment_path(appointment) %></td>
            <td><%= link_to 'Destroy', appointment, method: :delete, data: { confirm: 'Are you sure?' } %></td>
          </tr>
        <% end %>
      <% end %>
    <% end %>
  </tbody>
</table>

<br>


<%= link_to 'New Appointment', new_appointment_path %>
